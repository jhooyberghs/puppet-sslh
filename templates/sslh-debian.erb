# This file is managed by puppet
# Default options for sslh initscript
# sourced by /etc/init.d/sslh

# Disabled by default, to force yourself
# to read the configuration:
# - /usr/share/doc/sslh/README.Debian (quick start)
# - /usr/share/doc/sslh/README, at "Configuration" section
# - sslh(8) via "man sslh" for more configuration details.
# Once configuration ready, you *must* set RUN to yes here
# and try to start sslh (standalone mode only)

RUN=<%= scope.lookupvar('sslh::run') %>

# binary to use: forked (sslh) or single-thread (sslh-select) version
DAEMON=<%= scope.lookupvar('sslh::daemon') %>

DAEMON_OPTS="
	-user <%= scope.lookupvar('sslh::user') -%>
	--listen <%= scope.lookupvar('sslh::listen_sslh') -%>:<%= scope.lookupvar('sslh::port_sslh') -%>
<% if defined?sslh::listen_ssl -%>
	--ssl <%= scope.lookupvar('sslh::listen_ssl') -%>:<%= scope.lookupvar('sslh::port_ssl') -%>
<% end -%>
<% if defined?sslh::listen_http -%>
	--http <%= scope.lookupvar('sslh::listen_http') -%>:<%= scope.lookupvar('sslh::port_http') -%>
<% end -%>
<% if defined?sslh::listen_ssh -%>
	--ssh <%= scope.lookupvar('sslh::listen_ssh') -%>:<%= scope.lookupvar('sslh::port_ssh') -%> 
<% end -%>
<% if defined?sslh::listen_openvpn -%>
	--openvpn <%= scope.lookupvar('sslh::listen_openvpn') -%>:<%= scope.lookupvar('sslh::port_openvpn') -%> 
<% end -%>
<% if defined?sslh::listen_xmpp -%>
	--xmpp <%= scope.lookupvar('sslh::listen_xmpp') -%>:<%= scope.lookupvar('sslh::port_xmpp') -%> 
<% end -%>
<% if defined?sslh::listen_tinc -%>
	--tinc <%= scope.lookupvar('sslh::listen_tinc') -%>:<%= scope.lookupvar('sslh::port_tinc') -%> 
<% end -%>
	--pidfile <%= scope.lookupvar('sslh::pidfile') -%>
	"
